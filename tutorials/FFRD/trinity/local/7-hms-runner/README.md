## Compute Simulation All Placements Given Storm
The purpose of this action is to compute HEC-HMS for a given storm name (or event number), from the storms table generated by the hms-mutator. Computing by storm name will compute all placements for a given storm name found in the storm table. By computing this way, the dss file representing a storm (precip and temperature at hourly timesteps for the full transposition domain) is used for all of its placements and only loaded into the container once.

The compute takes longer per instance of the container than computing only one placement of a storm, so horizontal scale is limited with this method of computing, but it does decrease file transfers. 

On occasion, storm placement/antecedent condition combinations can result in a failed HEC-HMS run, these event failures are logged to a failed_events log file which can identify event numbers that need to be fixed and recomputed. This same action allows for setting the event identifier to be the event number and it will rerun the single event number and upsert into the summary csv files.

## Compute Simulation All Placements Action documentation
https://github.com/USACE-Cloud-Compute/hms-runner/blob/main/src/main/java/usace/cc/plugin/hmsrunner/actions/ComputeSimulationAllPlacementsAction.md

## parametrization for the tutorial
| Attribute | Description | Value |
|-----------|----------|-------------|
| `storms_catalog` | the location of the storms as dss files | /conformance/storm-catalog/storms/ |
| `model-name` | the name of the hms model name | trinity |
| `simulation` | The hms simulation name  | SST |
| `met-name` | The hms met model name | SST |
| `control-name` | The name of the hms control file  | SST |
| `basin-name` | The HMS base basin name | trinity_sst |
| `exported-precip-name` | The name of the exported precip file, if it ends in .dss it will write as a dss file, if it ends in .p01.tmp.hdf it will be written to HEC-RAS hdf format  | exported-precip_trinity.p01.tmp.hdf |
| `storm-name` | The storm name for this container | {ENV::CC_EVENT_IDENTIFIER} |
| `exported-peak-paths` | the dss record pathnames that need to be summarized for peak data, this needs to include all parameters being utilized in plots and in calculating ams contributing events.  | see compute manifest |
| `exported-peak-durations` | durations that the peaks will be computed for | [1,24,48,72] |
| `peak-datasource-name` | the name of the datasource with the peak file paths defined (key names based on the durations) | peaks |
| `log-datasource-name` | log datasource name keys of "failed_events" and "time_log" | 20220930 |

## required inputs

| Datasource Name | Path Key | Path Value (resolved from substitution) |
|-----------|----------|-------------|
| hms | control-file | conformance/hydrology/trinity/SST.control |
| hms | met-file | conformance/hydrology/trinity/SST.met |
| hms | simulation-dss | conformance/hydrology/trinity/SST.dss |
| hms | grid-file | conformance/hydrology/trinity/trinity.grid |
| hms | paired-data-file | conformance/hydrology/trinity/trinity.pdata |
| hms | hms-project-file | conformance/hydrology/trinity/trinity.hms |
| hms | run-file | conformance/hydrology/trinity/trinity.run |
| hms | sqlite-file | conformance/hydrology/trinity/trinity_sst.sqlite |
| hms | terrain-file | conformance/hydrology/trinity/trinity.terrain |
| hms | basin-file | conformance/hydrology/trinity/trinity_sst.basin |
| hms-data | paired-data-file | conformance/hydrology/trinity/data/paired_data.dss |
| hms-data | normalization-file | conformance/hydrology/trinity/data/trinity_72hr_100yr_in.tif |
| storms | default | conformance/simulations/storm-catalog/storms.csv |
| storm-catalog | default | conformance/storm-catalog/storms/{ENV::CC_EVENT_IDENTIFIER}.dss |
| basinfiles | basin-prefix | conformance/hydrology/trinity |
| controlfiles | control-prefix | conformance/hydrology/trinity/data/controlspecs |

////////////////run list of stomrs first then follow up with events if necessary
//run 50 events corresponding to simulations/storm-catalog/storms.csv

```txt
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:25:08.630537174Z preparing to run Simulation SST for event number 49
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:25:08.631110257Z 2025-12-21T00:25:08.630518007
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:21.563317389Z took 372 seconds
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:21.563423014Z posting simulation dss to aws SST for event number 49
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:22.095890097Z cf6c658a08c4e1725d2b67145a132e47
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:22.096131264Z took 0 seconds
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:22.096147805Z processing peaks SST for event number 49
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.052416591Z took 17 seconds
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.052495758Z posting peaks to map took 0 seconds
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.182487883Z reopening project /model/trinity/trinity.hms
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.229243633Z DefaultValidationEventHandler: [FATAL_ERROR]: Premature end of file. 
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.229264841Z      Location: line 1
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234207800Z Dec 21, 2025 12:31:40 AM hms.map.layer.MapAnnotationSettings loadValues
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234216008Z WARNING: Unable to parse map annotation settings.
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234217758Z jakarta.xml.bind.UnmarshalException
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234218758Z  - with linked exception:
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234219800Z [org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Premature end of file.]
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234220800Z       at jakarta.xml.bind.helpers.AbstractUnmarshallerImpl.createUnmarshalException(AbstractUnmarshallerImpl.java:310)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234222133Z       at org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.UnmarshallerImpl.createUnmarshalException(UnmarshallerImpl.java:538)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234223216Z       at org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:224)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234224216Z       at org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:189)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234225216Z       at jakarta.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:140)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234226175Z       at jakarta.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:179)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234227091Z       at jakarta.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:164)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234228050Z       at hms.map.layer.MapAnnotationSettings.loadValues(Unknown Source)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234228966Z       at hms.model.F.a(Unknown Source)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234229841Z       at hms.model.ProjectManager.<init>(Unknown Source)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234230841Z       at hms.model.Project.open(Unknown Source)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234231758Z       at usace.cc.plugin.hmsrunner.actions.ComputeSimulationAllPlacementsAction.computeAction(ComputeSimulationAllPlacementsAction.java:443)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234232841Z       at usace.cc.plugin.hmsrunner.HmsRunner.main(HmsRunner.java:59)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234233716Z Caused by: org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Premature end of file.
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234234675Z       at java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:204)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234235675Z       at java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:178)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234236716Z       at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:400)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234246425Z       at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:327)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234247550Z       at java.xml/com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(XMLScanner.java:1465)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234248341Z       at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:1013)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234249133Z       at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:605)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234249966Z       at java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:112)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234250758Z       at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:542)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234251591Z       at java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:889)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234252383Z       at java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:825)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234253133Z       at java.xml/com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234253883Z       at java.xml/com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1224)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234254675Z       at java.xml/com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:637)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234255466Z       at org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:218)
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234256258Z       ... 10 more
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.234256883Z 
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:31:40.495125258Z exporting excess precip SST for event number 49
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:35:38.433573591Z Dec 21, 2025 12:35:38 AM mil.army.usace.hec.vortex.io.Hdf5RasPrecipDataWriter$HdfRasPrecipDataset close
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:35:38.433597591Z INFO: Successfully closed HDF5 resources.
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:35:53.793629709Z Dec 21, 2025 12:35:53 AM mil.army.usace.hec.vortex.io.Hdf5RasPrecipDataWriter$HdfRasPrecipDataset close
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:35:53.793647750Z INFO: Successfully closed HDF5 resources.
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:36:09.126720341Z Dec 21, 2025 12:36:09 AM mil.army.usace.hec.vortex.io.Hdf5RasPrecipDataWriter$HdfRasPrecipDataset close
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:36:09.126747841Z INFO: Successfully closed HDF5 resources.
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:36:24.465225917Z Dec 21, 2025 12:36:24 AM mil.army.usace.hec.vortex.io.Hdf5RasPrecipDataWriter$HdfRasPrecipDataset close
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:36:24.465250001Z INFO: Successfully closed HDF5 resources.
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:36:39.713618341Z Dec 21, 2025 12:36:39 AM mil.army.usace.hec.vortex.io.Hdf5RasPrecipDataWriter$HdfRasPrecipDataset close
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:36:39.713641008Z INFO: Successfully closed HDF5 resources.
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:36:55.085338293Z Dec 21, 2025 12:36:55 AM mil.army.usace.hec.vortex.io.Hdf5RasPrecipDataWriter$HdfRasPrecipDataset close
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:36:55.085366209Z INFO: Successfully closed HDF5 resources.
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:37:03.446069797Z Dec 21, 2025 12:37:03 AM mil.army.usace.hec.vortex.io.Hdf5RasPrecipDataWriter$HdfRasPrecipDataset close
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:37:03.446091338Z INFO: Successfully closed HDF5 resources.
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:37:03.744361922Z exporting spatial excess precip took 323 seconds
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:37:03.832977713Z 1919435b71c69c89066c8a834f1b8f52
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:37:03.833542755Z posting to aws took 0 seconds
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:37:03.971894672Z 9cacb8ceba8803eab0a2e60c5d122bd3
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:37:03.982576713Z d0d359c84bce031be6382a29cf9507d9
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:37:03.996640005Z 5509fe56b410713ce187e2eb20b133ca
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:37:04.007078838Z 99d9e648d531262c8e02fa62e4662cdc
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:37:04.007098422Z No events failed
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:37:04.010839713Z event_number,computing simulation,posting simulation dss to aws,processing peaks,posting peaks to map,exporting spatial results,posting spatial results to aws,
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:37:04.010851713Z 17,358,0,17,0,325,0,
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:37:04.010853130Z 29,355,0,18,0,318,0,
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:37:04.010854255Z 30,354,0,17,0,304,0,
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:37:04.010855005Z 32,356,0,18,0,320,0,
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:37:04.010855922Z 39,354,0,20,0,304,0,
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:37:04.010856630Z 41,355,0,18,0,318,0,
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:37:04.010857297Z 43,363,0,18,0,321,0,
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:37:04.010858088Z 44,372,0,25,0,325,0,
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:37:04.010858797Z 49,372,0,17,0,323,0,
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:37:04.010859463Z 
JOB: 247d118b-b303-4c7f-b93c-3a574513d496: 2025-12-21T00:37:04.019485672Z f298eaca7ca7e6810e619e2084a90e5f
2025/12/20 19:37:04 FINISHED JOB: 247d118b-b303-4c7f-b93c-3a574513d496
```